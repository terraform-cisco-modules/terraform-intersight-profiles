#____________________________________________________________
#
# Moid Data Source
#____________________________________________________________

data "intersight_organization_organization" "orgs" {
}

data "intersight_search_search_item" "adapter_configuration" {
  for_each = { for v in [0] : v => v if length(local.adapter_configuration) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "adapter.ConfigPolicy' and Name in ('${
    trim(join("', '", local.adapter_configuration), ", '")}') and ObjectType eq 'adapter.ConfigPolicy"
  })
}

data "intersight_search_search_item" "bios" {
  for_each = { for v in [0] : v => v if length(local.bios) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "bios.Policy' and Name in ('${
    trim(join("', '", local.bios), ", '")}') and ObjectType eq 'bios.Policy"
  })
}

data "intersight_search_search_item" "boot_order" {
  for_each = { for v in [0] : v => v if length(local.boot_order) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "boot.PrecisionPolicy' and Name in ('${
    trim(join("', '", local.boot_order), ", '")}') and ObjectType eq 'boot.PrecisionPolicy"
  })
}

data "intersight_search_search_item" "certificate_management" {
  for_each = { for v in [0] : v => v if length(local.certificate_management) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "certificatemanagement.Policy' and Name in ('${
    trim(join("', '", local.certificate_management), ", '")}') and ObjectType eq 'certificatemanagement.Policy"
  })
}

data "intersight_search_search_item" "device_connector" {
  for_each = { for v in [0] : v => v if length(local.device_connector) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "deviceconnector.Policy' and Name in ('${
    trim(join("', '", local.device_connector), ", '")}') and ObjectType eq 'deviceconnector.Policy"
  })
}

data "intersight_search_search_item" "imc_access" {
  for_each = { for v in [0] : v => v if length(local.imc_access) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "access.Policy' and Name in ('${
    trim(join("', '", local.imc_access), ", '")}') and ObjectType eq 'access.Policy"
  })
}

data "intersight_search_search_item" "ipmi_over_lan" {
  for_each = { for v in [0] : v => v if length(local.ipmi_over_lan) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "ipmioverlan.Policy' and Name in ('${
    trim(join("', '", local.ipmi_over_lan), ", '")}') and ObjectType eq 'ipmioverlan.Policy"
  })
}

data "intersight_search_search_item" "lan_connectivity" {
  for_each = { for v in [0] : v => v if length(local.lan_connectivity) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "vnic.LanConnectivityPolicy' and Name in ('${
    trim(join("', '", local.lan_connectivity), ", '")}') and ObjectType eq 'vnic.LanConnectivityPolicy"
  })
}

data "intersight_search_search_item" "ldap" {
  for_each = { for v in [0] : v => v if length(local.ldap) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "iam.LdapPolicy' and Name in ('${
    trim(join("', '", local.ldap), ", '")}') and ObjectType eq 'iam.LdapPolicy"
  })
}

data "intersight_search_search_item" "local_user" {
  for_each = { for v in [0] : v => v if length(local.local_user) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "iam.EndPointUserPolicy' and Name in ('${
    trim(join("', '", local.local_user), ", '")}') and ObjectType eq 'iam.EndPointUserPolicy"
  })
}

data "intersight_search_search_item" "network_connectivity" {
  for_each = { for v in [0] : v => v if length(local.network_connectivity) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "networkconfig.Policy' and Name in ('${
    trim(join("', '", local.network_connectivity), ", '")}') and ObjectType eq 'networkconfig.Policy"
  })
}

data "intersight_search_search_item" "ntp" {
  for_each = { for v in [0] : v => v if length(local.ntp) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "ntp.Policy' and Name in ('${
    trim(join("', '", local.ntp), ", '")}') and ObjectType eq 'ntp.Policy"
  })
}

data "intersight_search_search_item" "persistent_memory" {
  for_each = { for v in [0] : v => v if length(local.persistent_memory) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "memory.PersistentMemoryPolicy' and Name in ('${
    trim(join("', '", local.persistent_memory), ", '")}') and ObjectType eq 'memory.PersistentMemoryPolicy"
  })
}

#data "intersight_search_search_item" "power" {
#  for_each = { for v in [0] : v => v if length(local.power) > 0 && var.moids_policies == true }
#  additional_properties = jsonencode({ "ClassId" = "power.Policy' and Name in ('${
#    trim(join("', '", local.power), ", '")}') and ObjectType eq 'power.Policy"
#  })
#}

data "intersight_search_search_item" "power" {
  for_each = { for v in [0] : v => v if length(local.power) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "power.Policy' and ObjectType eq 'power.Policy"
  })
}

data "intersight_search_search_item" "resource_pool" {
  for_each = { for v in [0] : v => v if length(local.resource_pool) > 0 && var.moids_pools == true }
  additional_properties = jsonencode({ "ClassId" = "resourcepool.Pool' and Name in ('${
    trim(join("', '", local.resource_pool), ", '")}') and ObjectType eq 'resourcepool.Pool"
  })
}

data "intersight_search_search_item" "san_connectivity" {
  for_each = { for v in [0] : v => v if length(local.san_connectivity) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "vnic.SanConnectivityPolicy' and Name in ('${
    trim(join("', '", local.san_connectivity), ", '")}') and ObjectType eq 'vnic.SanConnectivityPolicy"
  })
}

data "intersight_search_search_item" "sd_card" {
  for_each = { for v in [0] : v => v if length(local.sd_card) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "sdcard.Policy' and Name in ('${
    trim(join("', '", local.sd_card), ", '")}') and ObjectType eq 'sdcard.Policy"
  })
}

data "intersight_search_search_item" "serial_over_lan" {
  for_each = { for v in [0] : v => v if length(local.serial_over_lan) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "sol.Policy' and Name in ('${
    trim(join("', '", local.serial_over_lan), ", '")}') and ObjectType eq 'sol.Policy"
  })
}

data "intersight_search_search_item" "smtp" {
  for_each = { for v in [0] : v => v if length(local.smtp) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "smtp.Policy' and Name in ('${
    trim(join("', '", local.smtp), ", '")}') and ObjectType eq 'smtp.Policy"
  })
}

data "intersight_search_search_item" "snmp" {
  for_each = { for v in [0] : v => v if length(local.snmp) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "snmp.Policy' and Name in ('${
    trim(join("', '", local.snmp), ", '")}') and ObjectType eq 'snmp.Policy"
  })
}

data "intersight_search_search_item" "ssh" {
  for_each = { for v in [0] : v => v if length(local.ssh) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "ssh.Policy' and Name in ('${
    trim(join("', '", local.ssh), ", '")}') and ObjectType eq 'ssh.Policy"
  })
}

#data "intersight_search_search_item" "storage" {
#  for_each = { for v in [0] : v => v if length(local.storage) > 0 && var.moids_policies == true }
#  additional_properties = jsonencode({ "ClassId" = "storage.StoragePolicy' and Name in ('${
#    trim(join("', '", local.storage), ", '")}') and ObjectType eq 'storage.StoragePolicy"
#  })
#}

data "intersight_search_search_item" "syslog" {
  for_each = { for v in [0] : v => v if length(local.syslog) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "syslog.Policy' and Name in ('${
    trim(join("', '", local.syslog), ", '")}') and ObjectType eq 'syslog.Policy"
  })
}

data "intersight_search_search_item" "thermal" {
  for_each = { for v in [0] : v => v if length(local.thermal) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "thermal.Policy' and Name in ('${
    trim(join("', '", local.thermal), ", '")}') and ObjectType eq 'thermal.Policy"
  })
}

data "intersight_search_search_item" "virtual_kvm" {
  for_each = { for v in [0] : v => v if length(local.virtual_kvm) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "kvm.Policy' and Name in ('${
    trim(join("', '", local.virtual_kvm), ", '")}') and ObjectType eq 'kvm.Policy"
  })
}

data "intersight_search_search_item" "virtual_media" {
  for_each = { for v in [0] : v => v if length(local.virtual_media) > 0 && var.moids_policies == true }
  additional_properties = jsonencode({ "ClassId" = "vmedia.Policy' and Name in ('${
    trim(join("', '", local.virtual_media), ", '")}') and ObjectType eq 'vmedia.Policy"
  })
}

data "intersight_search_search_item" "uuid" {
  for_each = { for v in [0] : v => v if length(local.uuid) > 0 && var.moids_pools == true }
  additional_properties = jsonencode({ "ClassId" = "uuidpool.Pool' and Name in ('${
    trim(join("', '", local.uuid), ", '")}') and ObjectType eq 'uuidpool.Pool"
  })
}
